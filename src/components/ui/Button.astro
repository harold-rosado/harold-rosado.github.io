---
interface Props {
  variant?: 'filled' | 'outlined' | 'text';
  color?: 'accent' | 'success' | 'error';
  disabled?: boolean;
  type?: 'button' | 'submit';
  class?: string;
  fullWidth?: boolean;
}

const {
  variant = 'filled',
  color = 'accent',
  disabled = false,
  type = 'button',
  class: userClass = '',
  fullWidth = false,
  ...rest
} = Astro.props;

const base =
  'group relative inline-flex items-center justify-center font-medium text-base rounded-full transition-all duration-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap flex-shrink-0 overflow-hidden active:scale-95';

const styles = {
  accent: {
    filled: 'bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-indigo-500/40',
    outlined: 'border-2 border-indigo-500 text-indigo-500 hover:bg-indigo-600/10',
    text: 'text-indigo-600 hover:bg-indigo-600/10',
  },
  success: {
    filled: 'bg-emerald-600 text-white hover:bg-emerald-700 shadow-md',
    outlined: 'border-2 border-emerald-600 text-emerald-600 hover:bg-emerald-600/10',
    text: 'text-emerald-600 hover:bg-emerald-600/10',
  },
  error: {
    filled: 'bg-red-600 text-white hover:bg-red-700 shadow-md',
    outlined: 'border-2 border-red-600 text-red-600 hover:bg-red-600/10',
    text: 'text-red-600 hover:bg-red-600/10',
  },
};

const variantClass = styles[color][variant];
const sizeClass = 'px-8 py-3 h-12';
const extraWidthClass = fullWidth ? 'w-full' : '';
---

<button
  type={type}
  disabled={disabled}
  class:list={[base, variantClass, sizeClass, userClass, extraWidthClass]}
  {...rest}
>
  <!-- Efecto visual para botones filled -->
  {
    variant === 'filled' && (
      <span class="absolute inset-0 flex h-full w-full transform-[skew(-12deg)_translateX(-100%)] justify-center group-hover:transform-[skew(-12deg)_translateX(100%)] group-hover:duration-1000">
        <span class="relative h-full w-10 bg-white/30 blur-sm" />
      </span>
    )
  }

  <span class="flex items-center justify-center gap-4">
    <slot />
  </span>
</button>
